<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="The Vanderbilt Cryopreserved Mouse Repository (VCMR) contains a unique collection of genetically-modified mice that available for rederivation.  All lines have been either generated or modified by Vanderbilt investigators, and are not available in any other repository">
  <meta name="author" content="">
  <meta name="generator" content="0">
  <title>Vanderbilt Cryopreserved Mouse Repository (VCMR) - Managed by VGER at Vanderbilt University</title>

  <!-- Bootstrap core CSS -->
  <link href="//cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
  <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha512-iecdLmaskl7CVkqkXNQ/ZH/XLlvWZOJyj7Yy7tcenmpD1ypASozpmT/E0iPtmFIB46ZmdtAc9eNBvH0H/ZpiBw==" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link href="/css/theme_1685457420314.css" rel="stylesheet" />

  <!-- DataTables-->
  <link href="//cdn.datatables.net/1.13.4/css/jquery.dataTables.min.css" rel="stylesheet" />
  <link href="//cdn.datatables.net/fixedheader/3.3.2/css/fixedHeader.dataTables.min.css" rel="stylesheet" />
  <link href="//cdn.datatables.net/1.13.4/css/dataTables.bootstrap5.min.css" rel="stylesheet" />

  <style>
    .bd-placeholder-img {
      font-size: 1.125rem;
      text-anchor: middle;
      -webkit-user-select: none;
      -moz-user-select: none;
      user-select: none;
    }

    @media (min-width: 768px) {
      .bd-placeholder-img-lg {
        font-size: 3.5rem;
      }
    }
    #myTable thead th {
      border-bottom: 2px solid rgba(0, 0, 0, 0.3) !important;
    }


  </style>

</head>
<body>

<div class="col-lg-8 mx-auto p-3 py-md-5">
  <header class="d-flex align-items-center pb-3 mb-5 border-bottom">
    <a href="/" class="d-flex align-items-center text-dark text-decoration-none">
      <span class="fs-4">VCMR</span>
    </a>
  </header>

  <main>
    <h1>Vanderbilt Cryopreserved Mouse Repository</h1>

    <p class="lead">The Vanderbilt Cryopreserved Mouse Repository (VCMR) contains a unique collection of genetically-modified mice that available for rederivation.  All lines have been either generated or modified by Vanderbilt investigators, and are not available in any other repository.</p>

    <!--<hr class="col-3 col-md-2 mb-5">-->

    <div class="row">
      <div class="col-sm-7">
        <div class="card bg-light">
          <div class="card-body">
            <h2 class="fs-5 card-title">The following factors are considered prior to accepting strains into the VCMR:</h2>
            <ul class="icon-list text-muted">
              <li>Is the strain of potential value to other researchers?</li>
              <li>If the strain is available elsewhere, has it been modified by changing the genetic background to through intercrossing with other alleles?</li>
              <li>Has the strain been published?</li>
              <li>If the strain is unpublished, is there sufficient documentation and evidence that it functions as desired?</li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-sm-5">
        <div class="card">
          <div class="card-body bg-light">
            <h2 class="fs-5 card-title">Benefits of the Vanderbilt Cryopreserved Mouse Repository:</h2>
            <ul class="icon-list text-muted">
              <li>Facilitates compliance with NIH sharing policy</li>
              <li>Serves as an online resource of cryopreserved germplasm at Vanderbilt</li>
              <li>May avoid importing mice from an outside repository</li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!--
    <div class="row g-5">
      <div class="col-md-6">
        <p>The following factors are considered prior to accepting strains into the VCMR.</p>
        <ul class="icon-list text-muted">
          <li>Is the strain of potential value to other researchers?</li>
          <li>If the strain is available elsewhere, has it been modified by changing the genetic background to through intercrossing with other alleles?</li>
          <li>Has the strain been published?</li>
          <li>If the strain is unpublished, is there sufficient documentation and evidence that it functions as desired?</li>
        </ul>
      </div>

      <div class="col-md-6">
        <p>Benefits of the Vanderbilt Cryopreserved Mouse Repository:</p>
        <ul class="icon-list text-muted">
          <li>Facilitates compliance with NIH sharing policy</li>
          <li>Serves as an online resource of cryopreserved germplasm at Vanderbilt</li>
          <li>May avoid importing mice from an outside repository</li>
        </ul>
      </div>
    </div>-->

    <!--<hr class="col-3 col-md-2 mb-5">-->
    <br />
      <div class="row">
        <div class="col">

          <div class="row" id="filtering_and_searching">
            <div class="col-7"><span id="filtering_left"></span></div>
            <div class="col-1">&nbsp;</div>
            <div class="col-4"><span id="filtering_right"></span></div>
          </div>

          <table id="myTable" class="table float-end"  style="width:100%">
            <!-- Table headers will be dynamically generated -->
          </table>


        </div>
      </div>

  </main>
  <footer class="pt-5 my-5 text-muted border-top">
    Created by <a href="https://medschool.vanderbilt.edu/vcmr/">VGER</a> &copy; 2023-current<br/>
    <small><a href="releases.html#1.2">Version 1.3</a> &middot; Last updated on 2025-02-12</small>
  </footer>
</div>


<!-- DataTables-->
<script src="//code.jquery.com/jquery-3.7.0.min.js"></script>
<script src="//cdn.datatables.net/1.13.4/js/jquery.dataTables.min.js"></script>
<script src="//cdn.datatables.net/fixedheader/3.2.0/js/dataTables.fixedHeader.min.js"></script>

<!-- Bootstrap -->
<script src="//cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>

<!-- PapaParse-->
<script src="//cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js" integrity="sha512-dfX5uYVXzyU8+KHqj8bjo7UkOdg18PaOtpa48djpNbZHwExddghZ+ZmzWT06R5v6NSk3ZUfsH6FNEDepLx9hPQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script>
  $(document).ready(function() {
    Papa.parse("data/VCMRv8.csv", {
      download: true,
      header: true,
      skipEmptyLines: "greedy", // Skip empty lines, including potential trailing newlines

      transform: function(value, header) {
        // Replace newline characters within quoted fields
        if (value && value.includes('\n')) {
          return value.replace(/\n/g, '<br>');
        }
        return value;
      },
      complete: function(results) {
        var data = results.data;

        //console.log(data);

        var table = $('#myTable').DataTable({
          data: data,
          fixedHeader: true,
          paging: false,
          dom: '<"pull-left" fi><t>',
          columns: [
            //{ name:"vger_id", data: 'VGER ID', title: 'VGER ID' },
            {
              name: "name",
              data: 'Formal Line Name',
              title: 'Formal Line Name',
              render: function(data, type, row) {
                data = data.replace("{", "<sup>");
                data = data.replace("}", "</sup>");
                var vger_id = row['VGER ID'];
                var link = '<a href="mouse.html?vger_id=' + encodeURIComponent(vger_id) + '">' + data + '</a>';
                return link;
              }
            },
            {
              name: 'mutation_type',
              data: 'Allele Class',
              title: 'Allele Class'
            },
            {
              name: 'mutation_class',
              data: 'Mutation Class',
              title: 'Mutation Class'
            },
            // {
            //   name: 'allele_symbol',
            //   data: 'Allele Symbol', title: 'Allele Symbol',
            //   render: function(data) {
            //     data = data.replace("{", "<sup>");
            //     data = data.replace("}", "</sup>");
            //     return data;
            //   }
            // },
            {
              name: 'availability',
              data: 'Availability',
              title: 'Availability'
            }

            // Add more column definitions as needed
          ],
          initComplete: function(settings, json) {
            $('#myTable tbody').addClass('table-group-divider');
            $('#myTable tbody').addClass('table_header_border');
            $('#myTable_filter input').addClass('table_header_border')
            $('#myTable_filter label').css('padding-top','5px')
          }
        });

        // Mutation Types
        var uniqueValues = table
                //.column(2) // Index 2 represents the '' column
                .column('mutation_type:name')
                .data()
                .unique()
                .toArray();

        // Generate radio buttons based on unique values
        var radioButtons = uniqueValues.map(function(value) {
          return '<input class="btn-check mutation-type" type="radio" name="mutationType" id="mutationType_' + value + '" value="' + value + '">' +
                  '<label class="btn btn-outline-primary" for="mutationType_' + value + '">' + value + '</label>';
        });

        // Insert radio buttons above the table
        $('<div class="btn-group" role="group" aria-label="Basic radio toggle button group">' +
                '<input class="btn-check mutation-type" type="radio" name="mutationType" id="mutationType_reset" checked="checked" value="">' +
                '<label class="btn btn-outline-primary" for="mutationType_reset"><i class="fa-solid fa-xmark"></i></label>' +
                radioButtons.join('') +
                '</div>').insertBefore('#filtering_left');

        // Handle radio button change event
        $('.mutation-type').on('change', function() {
          var selectedValue = $(this).val();

          // Filter the table based on the selected value
          table
                  .column('mutation_type:name')
                  .search(selectedValue)
                  .draw();
        });


        // Allele symbols
        var alleleTypes = table
                //.column(2) // Index 2 represents the '' column
                .column('allele_symbol:name')
                .data()
                .unique()
                .sort()
                .toArray();

        var uniqueLabels = Array.from(new Set(alleleTypes.map(function(str) {
          return str.split("{")[0];
        })));

        // Creating the filter label and dropdown container
        var container = $('<div class="filter-container"></div>').appendTo('div span#filtering_right');
        //  $('<label for="allele-filter">Filter by Gene:</label>').appendTo(container);

        // Creating the dropdown filter
        var select = $('<select id="allele-filter"  class="form-select"></select>')
                .appendTo(container)
                .on('change', function() {
                  table.column('allele_symbol:name').search($(this).val()).draw();
                });

       // Adding the default option
        $('<option value="">Filter by Gene:</option>').appendTo(select);

         // Adding the label options
        uniqueLabels.forEach(function(label) {
          $('<option value="' + label + '">' + label + '</option>').appendTo(select);
        });

      }
    });
  });
</script>

</body>
</html>
